{"ast":null,"code":"import _extends from \"/sandbox/node_modules/babel-preset-razzle/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"/sandbox/node_modules/babel-preset-razzle/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/sandbox/node_modules/babel-preset-razzle/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"/sandbox/src/PageSections.js\",\n    _this = this;\n\nvar __jsx = React.createElement;\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { useInView } from \"react-intersection-observer\";\nimport slugify from \"@sindresorhus/slugify\";\nexport var ActiveSectionCallbackContext = /*#__PURE__*/createContext();\nexport var ActiveSectionContext = /*#__PURE__*/createContext();\nexport var PageSectionProvider = function PageSectionProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      activeSection = _useState[0],\n      setActiveSection = _useState[1];\n\n  return __jsx(ActiveSectionCallbackContext.Provider, {\n    value: setActiveSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 5\n    }\n  }, __jsx(ActiveSectionContext.Provider, {\n    value: activeSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }\n  }, children));\n};\nexport var PageSection = function PageSection(_ref2) {\n  var title = _ref2.title,\n      shortTitle = _ref2.shortTitle,\n      props = _objectWithoutProperties(_ref2, [\"title\", \"shortTitle\"]);\n\n  var id = slugify((shortTitle || title || \"Undefined Title\").replace(/\\|/, \" \"));\n  var setActiveSection = useContext(ActiveSectionCallbackContext);\n\n  var _useInView = useInView({\n    threshold: 0.2,\n    rootMargin: \"-250px 0px 0px 0px\"\n  }),\n      _useInView2 = _slicedToArray(_useInView, 3),\n      ref = _useInView2[0],\n      inView = _useInView2[1],\n      entry = _useInView2[2];\n\n  useEffect(function () {\n    if (inView) {\n      setActiveSection(id);\n      console.log(id);\n    }\n  }, [inView]);\n  return __jsx(\"div\", _extends({\n    id: id,\n    ref: ref\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 10\n    }\n  }));\n};","map":{"version":3,"sources":["/sandbox/src/PageSections.js"],"names":["React","createContext","useContext","useState","useEffect","useInView","slugify","ActiveSectionCallbackContext","ActiveSectionContext","PageSectionProvider","children","activeSection","setActiveSection","PageSection","title","shortTitle","props","id","replace","threshold","rootMargin","ref","inView","entry","console","log"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IACEC,aADF,EAIEC,UAJF,EAKEC,QALF,EAMEC,SANF,QAOO,OAPP;AASA,SAASC,SAAT,QAA0B,6BAA1B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,OAAO,IAAMC,4BAA4B,gBAAGN,aAAa,EAAlD;AAEP,OAAO,IAAMO,oBAAoB,gBAAGP,aAAa,EAA1C;AAEP,OAAO,IAAMQ,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,kBACTP,QAAQ,CAAC,KAAD,CADC;AAAA,MAC5CQ,aAD4C;AAAA,MAC7BC,gBAD6B;;AAEnD,SACE,MAAC,4BAAD,CAA8B,QAA9B;AAAuC,IAAA,KAAK,EAAEA,gBAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,oBAAD,CAAsB,QAAtB;AAA+B,IAAA,KAAK,EAAED,aAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,QADH,CADF,CADF;AAOD,CATM;AAWP,OAAO,IAAMG,WAAW,GAAG,SAAdA,WAAc,QAAqC;AAAA,MAAlCC,KAAkC,SAAlCA,KAAkC;AAAA,MAA3BC,UAA2B,SAA3BA,UAA2B;AAAA,MAAZC,KAAY;;AAC9D,MAAMC,EAAE,GAAGX,OAAO,CAChB,CAACS,UAAU,IAAID,KAAd,IAAuB,iBAAxB,EAA2CI,OAA3C,CAAmD,IAAnD,EAAyD,GAAzD,CADgB,CAAlB;AAGA,MAAMN,gBAAgB,GAAGV,UAAU,CAACK,4BAAD,CAAnC;;AAJ8D,mBAKjCF,SAAS,CAAC;AACrCc,IAAAA,SAAS,EAAE,GAD0B;AAErCC,IAAAA,UAAU,EAAE;AAFyB,GAAD,CALwB;AAAA;AAAA,MAKvDC,GALuD;AAAA,MAKlDC,MALkD;AAAA,MAK1CC,KAL0C;;AAU9DnB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIkB,MAAJ,EAAY;AACVV,MAAAA,gBAAgB,CAACK,EAAD,CAAhB;AACAO,MAAAA,OAAO,CAACC,GAAR,CAAYR,EAAZ;AACD;AACF,GALQ,EAKN,CAACK,MAAD,CALM,CAAT;AAOA,SAAO;AAAK,IAAA,EAAE,EAAEL,EAAT;AAAa,IAAA,GAAG,EAAEI;AAAlB,KAA2BL,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;AACD,CAlBM","sourcesContent":["import React, {\n  createContext,\n  forwardRef,\n  useCallback,\n  useContext,\n  useState,\n  useEffect\n} from \"react\";\n\nimport { useInView } from \"react-intersection-observer\";\nimport slugify from \"@sindresorhus/slugify\";\n\nexport const ActiveSectionCallbackContext = createContext();\n\nexport const ActiveSectionContext = createContext();\n\nexport const PageSectionProvider = ({ children }) => {\n  const [activeSection, setActiveSection] = useState(false);\n  return (\n    <ActiveSectionCallbackContext.Provider value={setActiveSection}>\n      <ActiveSectionContext.Provider value={activeSection}>\n        {children}\n      </ActiveSectionContext.Provider>\n    </ActiveSectionCallbackContext.Provider>\n  );\n};\n\nexport const PageSection = ({ title, shortTitle, ...props }) => {\n  const id = slugify(\n    (shortTitle || title || \"Undefined Title\").replace(/\\|/, \" \")\n  );\n  const setActiveSection = useContext(ActiveSectionCallbackContext);\n  const [ref, inView, entry] = useInView({\n    threshold: 0.2,\n    rootMargin: \"-250px 0px 0px 0px\"\n  });\n\n  useEffect(() => {\n    if (inView) {\n      setActiveSection(id);\n      console.log(id);\n    }\n  }, [inView]);\n\n  return <div id={id} ref={ref} {...props} />;\n};\n"]},"metadata":{},"sourceType":"module"}